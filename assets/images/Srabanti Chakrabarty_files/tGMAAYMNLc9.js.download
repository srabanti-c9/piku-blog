if (self.CavalryLogger) { CavalryLogger.start_js(["LQrOT"]); }

__d("XFBStoriesSingleStoryAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/view/async/",{card_id:{type:"FBID"},story_id:{type:"FBID"},auto_open_viewersheet:{type:"Bool",defaultValue:!1},story_action_source:{type:"String"}})}),null);
__d("FBStoriesRing",["csx","cx","Arbiter","CSS","DOM","FBStoriesLoggingConstants","XFBStoriesSingleStoryAsyncController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a.element;this.$2=a.profileId;this.$3=a.storyId;this.$4=!1;a=b("DOM").scry(this.$1,"._6_ut");a.length>0&&(this.$4=!0);this.$5()}var c=a.prototype;c.$5=function(){__p&&__p();var a=this;b("Arbiter").subscribe("has_story_bucket_been_seen",function(c,d){if(a.$2===d){c=b("DOM").scry(a.$1,"._6_ut");c.length>0&&(b("CSS").removeClass(c[0],"_6_ut"),a.$4=!1)}});b("Arbiter").subscribe("update_next_thread_to_view",function(c,d){c=d.bucketOwnerId;d=d.threadId;if(a.$2===c&&a.$4){c=b("XFBStoriesSingleStoryAsyncController").getURIBuilder().setFBID("story_id",a.$3).setFBID("card_id",d).setBool("auto_open_viewersheet",!1).setString("story_action_source",b("FBStoriesLoggingConstants").SOURCES.POST_HEADER).getURI();a.$1.setAttribute("ajaxify",c)}})};return a}();e.exports=a}),null);
__d("FeedImageLoadPerfLogger",["DOMQuery","Event","FeedQuickLogModule","QuickPerformanceLogger","Run","crc32"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FeedQuickLogModule").IMAGE_LOAD_WWW;function h(a){if(!a||!a.target||!a.target.src)return;a=a.target;var c=a.src;a.complete&&b("QuickPerformanceLogger").markerEnd(g,"SUCCESS",b("crc32")(c));j(a)}function i(a){if(!a||!a.target||!a.target.src)return;a=a.target;var c=a.src;if(!c)return;b("QuickPerformanceLogger").markerEnd(g,"FAIL",b("crc32")(c));j(a)}function j(a){if(!a)return;a.removeEventListener("load",h,!0);a.removeEventListener("error",i,!0)}function k(a){__p&&__p();if(!a||!a.src)return;b("QuickPerformanceLogger").markerStart(g,b("crc32")(a.src));if(a.complete){b("QuickPerformanceLogger").markerEnd(g,"SUCCESS",b("crc32")(a.src));return}a.addEventListener("load",h,!0);a.addEventListener("error",i,!0);b("Run").onLeave(function(){l(a)})}function l(a){if(!a||!a.src)return;if(a.complete)return;b("QuickPerformanceLogger").markerEnd(g,"CANCEL",b("crc32")(a.src));j(a)}a={startMarkers:function(a){if(!a)return;a=b("DOMQuery").scry(a,"img");a.forEach(function(a){k(a)})},cancelMarkers:function(a){if(!a)return;a=b("DOMQuery").scry(a,"img");a.forEach(function(a){l(a)})}};e.exports=a}),null);
__d("GamesGogglesSwitch",[],(function(a,b,c,d,e,f){var g=!1;a={enable:function(){g=!0},isEnabled:function(){return g}};e.exports=a}),null);
__d("GamesImpressionTracker",["cx","Arbiter","Banzai","Event","GamesGogglesSwitch","VisibilityTracking","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="data-gamesrankedimp";a=1e3;function i(a){b("GamesGogglesSwitch").isEnabled()&&(a.className=a.className+" _1z5y")}function j(a){return function(){a&&(a(),a=null)}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.handleEvent=function(a,c){if(c.name==="visible"){var d=a.getAttribute(h);a.removeAttribute(h);d&&(i(a),d&&b("Banzai").post("games_ranked_imp",{data:d}));b("Event").listen(a,"mouseover",j(function(){b("Banzai").post("games_mouseover",{data:d}),b("Event").listen(a,"mouseout",j(function(){b("Banzai").post("games_mouseout",{data:d})}))}))}};return c}(b("VisibilityTracking"));var k=new c({selector:"[data-gamesrankedimp]",handleAllVisibleEvents:!0,cacheTrackedElements:!0});d=b("throttle").acrossTransitions(function(){return k.fireEventCallback()},a,null);k.listeners&&k.listeners.addSubscriptions(b("Event").listen(document,"mousemove",d),b("Event").listen(document,"click",d),b("Arbiter").subscribe("games_unit_loaded",function(){return k.refreshAllTrackedElements()}))}),null);
__d("MainThreadPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setArtilleryTraceID=function(a){this.$1.artillery_trace_id=a;return this};c.setEventDurationMs=function(a){this.$1.event_duration_ms=a;return this};c.setFrameDrops=function(a){this.$1.frame_drops=a;return this};c.setLargeFrameDrops=function(a){this.$1.large_frame_drops=a;return this};c.setMaxFrameDrops=function(a){this.$1.max_frame_drops=a;return this};c.setParallelActions=function(a){this.$1.parallel_actions=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSampleRate=function(a){this.$1.sample_rate=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action:!0,artillery_trace_id:!0,event_duration_ms:!0,frame_drops:!0,large_frame_drops:!0,max_frame_drops:!0,parallel_actions:!0,sample_rate:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("collectSubtreeData",[],(function(a,b,c,d,e,f){__p&&__p();function g(a,b,c,d,e){__p&&__p();if(a.offsetWidth===0&&a.offsetHeight===0)return e;var f={};if(a.getAttribute)for(j=0;j<b.length;j++){k=b[j];var h=a.getAttribute(c[k]);if(h){f[k]={};h=JSON.parse(h);for(var i in d)h[i]!==void 0&&(f[k][i]=!0,e[k]===void 0&&(e[k]={}),e[k][i]===void 0&&(e[k][i]=[]),d[i].length>0&&e[k][i].push(d[i]),e[k][i].push("("+h[i]))}}for(var j=0;j<a.childNodes.length;j++){h=a.childNodes[j];g(h,b,c,d,e)}for(var k in f)for(var l in f[k]){h=e[k][l][e[k][l].length-1];h.length>0&&h.charAt(0)=="("?e[k][l][e[k][l].length-1]=h.substr(1):e[k][l].push(")")}return e}function a(a,b){__p&&__p();var c={};for(var d=0;d<b.length;++d)c[b[d]]="data-"+b[d];d={tn:"","tn-debug":","};var e={};g(a,b,c,d,e);for(var f in e)for(var h in e[f])e[f][h]=e[f][h].join("");return e}e.exports=a}),null);
__d("recordTNTreeData",["collectSubtreeData"],(function(a,b,c,d,e,f){function a(a,c){var d={},e=b("collectSubtreeData")(a,["ft"]);for(var f in e.ft)d[f+"_tree"]=e.ft[f],f==="tn-debug"&&a.setAttribute("tn-debug_subtree",e.ft[f]);d.evt_value=a.offsetHeight;c&&(d.offset=Math.max(0,a.offsetTop-c.offsetTop));return d}e.exports=a}),null);
__d("ArtilleryInteractionTraceName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DETAILS_PAGE_LOADING:"Details Page Loading",FBPKG_UI:"fbpkg_ui",BACKBONE_UI:"backbone_ui",ADS_INTERFACES_INTERACTION:"ADS_INTERFACES_INTERACTION",ADS_PERF_SCENARIO:"ads_perf_scenario",ADS_WAIT_TIME:"ads_wait_time",INTERN_NOTIFY_INBOX_PAGE_LOAD:"intern_notify_inbox_page_load",INTERN_NOTIFY_JEWEL_LIST_LOAD:"intern_notify_jewel_list_load",MAIN_THREAD_PERFORMANCE:"main_thread_performance",PAGES_INBOX_WWW_LOADING_ITEM:"pages_inbox_www.loading_item",SEVMANAGER_POWERSEARCH_INITIAL_PAGE_LOAD:"sevmanager_powersearch_initial_page_load",WATCH_SECTIONS_LOAD_MORE:"watch_sections_load_more",WATCH_DISCOVER_SCROLL:"watch_discover_scroll",WATCH_CAROUSEL_LEFT_SCROLL:"watch_carousel_left_scroll",WATCH_CAROUSEL_RIGHT_SCROLL:"watch_carousel_right_scroll",VIDEO_STALL:"video_stall",VIDEO_PSR:"video_psr",EVENT:"Event",DAIQUERY_INTERACTIVE_QUERY:"daiquery_interactive_query",TASKS_INITIAL_PAGE_LOAD:"tasks_initial_page_load",DO_NOT_USE_JUST_FOR_TESTING:"__test_interaction",PIXELCLOUD_VIEW_PERFORMANCE:"pixelcloud_view_performance"})}),null);
__d("MainThreadPerformanceMonitorActionEntry",["ArtilleryInteractionTraceName","FeedQuickLogModule","MainThreadPerformanceTypedLogger","QuickPerformanceLogger","TimeSliceInteraction","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(c,d,e){this.$4=0,this.$5=0,this.$7=0,this.$2=c,this.$10=e,this.$8=b("performanceNow")(),this.$6=new Set(d),this.$9=b("TimeSliceInteraction").create(b("ArtilleryInteractionTraceName").MAIN_THREAD_PERFORMANCE),this.$9.trace().addStringAnnotation("action",this.$2),this.$3=a.$1++,b("QuickPerformanceLogger").markerStart(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,this.$3),b("QuickPerformanceLogger").annotateMarkerString(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"ACTION",c,this.$3),b("QuickPerformanceLogger").setSampleRateForInstance(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,e,this.$3)}var c=a.prototype;c.addLargeFrameDrops=function(a){if(a<=0)return this;this.$4+=a;this.$9.inform("large_frame_drop",{pointGroup:"large_frame_drops"}).addStringAnnotation("quantity",a.toString());return this};c.addFrameDrops=function(a){if(a<=0)return this;this.$5=Math.max(this.$5,a);this.$7+=a;return this};c.addParallelAction=function(a){this.$6.add(a);return this};c.log=function(){__p&&__p();if(this.$7>0){var a=b("performanceNow")()-this.$8;new(b("MainThreadPerformanceTypedLogger"))().setFrameDrops(this.$7).setLargeFrameDrops(this.$4).setMaxFrameDrops(this.$5).setAction(this.$2).setEventDurationMs(Math.round(a)).setParallelActions(this.$6).setArtilleryTraceID(this.$9.getTraceID()).setSampleRate(this.$10).log()}a=Array.from(this.$6);this.$4>0&&(this.$9.trace().addSetAnnotation("parallel_actions",a),this.$9.finish());b("QuickPerformanceLogger").annotateMarkerStringArray(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"PARALLEL_ACTIONS",a,this.$3);b("QuickPerformanceLogger").annotateMarkerDouble(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"LARGE_FRAME_DROPS",this.$4,this.$3);b("QuickPerformanceLogger").annotateMarkerDouble(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"FRAME_DROPS",this.$7,this.$3);b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"SUCCESS",this.$3)};return a}();a.$1=0;e.exports=a}),null);
__d("MainThreadPerformanceMonitor",["MainThreadPerformanceMonitorActionEntry","MainThreadPerformanceMonitorConfig","Random","Run","SubscriptionsHandler","Visibility","clearTimeout","gkx","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MainThreadPerformanceMonitorConfig").actionMaxDuration||12e4,h=1,i=4;a=60;var j=1e3/a,k=j*60,l=new Map(),m={},n,o,p=new(b("SubscriptionsHandler"))();function q(){p&&p.release(),u(),l.clear()}function r(){t(),p.addSubscriptions(b("Run").onLeave(q),b("Visibility").addListener(b("Visibility").VISIBLE,function(){return t()}),b("Visibility").addListener(b("Visibility").HIDDEN,function(){return u()}))}function s(a){__p&&__p();if(o){var c=a-o;if(c<k){c=Math.max(Math.round(c/j)-1,0);var d=c>=h?c/h:0,e=c>=i?c/i:0;l.forEach(function(a){return a.addFrameDrops(d).addLargeFrameDrops(e)})}}o=a;n=b("requestAnimationFrame")(s)}function t(){n||(o=0,n=b("requestAnimationFrame")(s))}function u(){cancelAnimationFrame(n),n=null}c={isEnabled:function(){return b("gkx")("678737")},start:function(a){__p&&__p();var c=this;if(l.has(a))return!0;if(!this.isEnabled())return!1;l.forEach(function(b){return b.addParallelAction(a)});var d=b("MainThreadPerformanceMonitorConfig").actionSamplingRates[a]||0;if(!b("Random").coinflip(d))return!1;l.size===0&&r();l.set(a,new(b("MainThreadPerformanceMonitorActionEntry"))(a,l.keys(),d));m[a]=b("setTimeout")(function(){return c.stop(a)},g);return!0},stop:function(a){__p&&__p();if(!this.isEnabled())return;var c=l.get(a);if(!c)return;c.log();l["delete"](a);b("clearTimeout")(m[a]);delete m[a];l.size===0&&q()}};e.exports=c}),null);
__d("StreamViewportTracking",["DataAttributeUtils","DOM","DOMDimensions","FeedImageLoadPerfLogger","ViewportTracking","ge","gkx","recordTNTreeData","viewportTrackingBuilder"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=51;function h(a,c,d,e){__p&&__p();e===void 0&&(e=g);return{_stream:null,getDataFromConfig:function(a,b){b.isTimetrackingEnabled=!0},getAllStories:function(){var a=b("DOM").scry(this.getStream(),d);return a.filter(function(a){return b("DataAttributeUtils").getDataFt(a)})},getStream:function(){if(c)return c;this._stream||(this._stream=b("ge")("home_stream"));return this._stream},getStoryID:function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a&&a.mf_story_key},getDataToLog:function(a){__p&&__p();var c=this.getStream();c=b("recordTNTreeData")(a,c);var d=a.getAttribute("data-insertion-position");d!==null&&(c.inspos=d);c.evt=e;c.vpv_time=Math.round(Date.now()/1e3);d=b("DOM").scry(a,".fbStoryAttachmentImage")[0];if(d){a=b("DOMDimensions").getElementDimensions(d);c.story_image_height=a.height;c.story_image_width=a.width}return{ft:c}},afterStoryEntersViewport:b("gkx")("678827")?function(a){b("FeedImageLoadPerfLogger").startMarkers(a)}:function(a){},afterStoryExitsViewport:b("gkx")("678827")?function(a){b("FeedImageLoadPerfLogger").cancelMarkers(a)}:function(a){}}}var i=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.getQueryID=function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a.qid};d.getFBFeedLocations=function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a.fbfeed_location};d.getFBFeedInsertionPosition=function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a.insertion_position};d.getTimetrackingDataToLog=function(a){__p&&__p();var d=c.prototype.getTimetrackingDataToLog.call(this,a);if(this.ctaLoggingEnabled){a=b("DOM").scry(a.story,"[data-is-cta]").map(function(a){a=b("DataAttributeUtils").getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});a.length>0&&(d.ft.cta_types=a)}return d};d.cleanup=function(){j.clearSingleton(),c.prototype.cleanup.call(this)};return a}(b("ViewportTracking")),j=b("viewportTrackingBuilder")(function(a,b){b=new i(h(a,b,".uiStreamStory"));b.init(a);return b});i.factory=j.factory.bind(j);i.singleton=j.singleton.bind(j);i.clearSingleton=j.clearSingleton.bind(j);i.getBehavior=h;e.exports=i}),null);
__d("OWLBehavior",["Event","gkx","goURI","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={attach:function(a,c,d){if(b("gkx")("847879")){var e=function(){a!=null&&d.setAttribute("href",a),c!=null&&d.setAttribute("title",c)},f=function(){a!=null&&d.removeAttribute("href"),c!=null&&d.removeAttribute("title")};b("Event").listen(d,{blur:f,focus:e,mouseenter:e,mouseleave:f})}else a!=null&&d.addEventListener("click",function(c){return g(c,b("nullthrows")(a))}),c!=null&&d.addEventListener("mouseenter",function(){d.setAttribute("title",b("nullthrows")(c))})},attachOnlyOnFocus:function(a,c){b("Event").listen(a,{blur:e,focus:d,mouseenter:d,mouseleave:e});function d(){c.forEach(function(b,c){return a.setAttribute(c,b.toString())})}function e(){c.forEach(function(b,c){return a.removeAttribute(c)})}}};var g=function(a,c){a.metaKey||a.ctrlKey?window.open(c,"_blank"):b("goURI")(c)};e.exports=a}),null);
__d("MainThreadPerformanceLoggerActions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCROLL:"scroll",TAIL_LOAD:"tail_load"})}),null);