if (self.CavalryLogger) { CavalryLogger.start_js(["fQDgm"]); }

__d("BucketedTypeaheadView",["fbt","DOM","TypeaheadView"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(b,c,d,e){var f=c.length>0;for(var g=0;g<c.length;++g)c[g].type!=="hashtag"&&(f=!1);f||(c=this.buildBuckets(b,c));if(d&&e){g=this.results.length-this.index;this.index=c.length-g}return a.prototype.render.call(this,b,c,d)};d.highlight=function(b,c){this.headerIndex=!1;b==-1&&this.index!==0&&(b=this.index);while(b>=0&&b<this.items.length&&!this.isHighlightable(this.results[b]))b=b+1,this.headerIndex=!0;a.prototype.highlight.call(this,b,c)};d.buildBuckets=function(a,b){__p&&__p();if(!this.typeObjects||!b||!b.length)return b;a=[];var c={};for(var d=0;d<b.length;++d){var e=b[d],f=e.render_type||e.type;Object.prototype.hasOwnProperty.call(c,f)||(c[f]=a.length,a.push([this.buildBucketHeader(f)]));e.classNames=e.classNames||f;e.groupIndex=c[f];e.indexInGroup=a[e.groupIndex].length-1;e.globalIndex=d;a[e.groupIndex].push(e)}for(f in this.typeObjects)!Object.prototype.hasOwnProperty.call(c,f)&&this.typeObjects[f].show_always&&(c[f]=a.length,a.push([this.buildBucketHeader(f)]),e=this.buildNoResultsEntry(),e.classNames=e.type,e.groupIndex=c[f],e.indexInGroup=a[e.groupIndex].length-1,a[e.groupIndex].push(e));d=[];if(this.typeObjectsOrder)for(var b=0;b<this.typeObjectsOrder.length;++b){e=this.typeObjectsOrder[b];Object.prototype.hasOwnProperty.call(c,e)&&(d=d.concat(a[c[e]]))}else for(var f=0;f<a.length;++f)d=d.concat(a[f]);return d};d.buildNoResultsEntry=function(){return{uid:"disabled_result",type:"disabled_result",text:g._("No Results")}};d.buildBucketHeader=function(a){var b=this.typeObjects[a];if(b===void 0)throw new Error(a+" is undefined in "+JSON.stringify(this.typeObjects));b.markup&&(b.text=b.markup,delete b.markup);return this.typeObjects[a]};d.buildResults=function(c){c=a.prototype.buildResults.call(this,c);if(this.typeObjects)return b("DOM").create("div",{className:"bucketed"},[c]);else return c};d.isHighlightable=function(a){return a.type!="header"&&a.type!="disabled_result"};d.select=function(b){var c=this.results[this.index];c&&this.isHighlightable(c)&&a.prototype.select.call(this,b)};d.updateResults=function(a){this.results=a};d.normalizeIndex=function(a){var b=this.results.length;if(b===0)return-1;else if(a<-1)return a%b+b+1;else if(a>=b)return a%b-1;else return a};d.getDefaultIndex=function(a){var b=this.autoSelect&&!this.disableAutoSelect;if(this.index<0&&!b)return-1;if(!a||a&&a.length===0)return-1;b=0;while(!this.isHighlightable(a)&&b<a.length)b++;return b};d.prev=function(){var b=this.results[this.normalizeIndex(this.index-1)];while(b&&!this.isHighlightable(b))this.index=this.normalizeIndex(this.index-1),b=this.results[this.normalizeIndex(this.index-1)];return a.prototype.prev.call(this)};d.next=function(){var b=this.results[this.normalizeIndex(this.index+1)];while(b&&!this.isHighlightable(b))this.index=this.normalizeIndex(this.index+1),b=this.results[this.normalizeIndex(this.index+1)];return a.prototype.next.call(this)};return c}(b("TypeaheadView"));e.exports=a}),null);
__d("ContextualTypeaheadView",["BucketedTypeaheadView","ContextualLayer","ContextualLayerAutoFlip","ContextualLayerHideOnScroll","CSS","DOM","DOMDimensions","Style"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.init=function(){this.initializeLayer(),a.prototype.init.call(this)};d.initializeLayer=function(){this.context=this.getContext(),this.wrapper=b("DOM").create("div"),b("DOM").appendContent(this.wrapper,this.element),b("CSS").addClass(this.element,"uiContextualTypeaheadView"),this.layer=new(b("ContextualLayer"))({context:this.context,position:"below",alignment:this.alignment,causalElement:this.causalElement,permanent:!0,shouldSetARIAProperties:!1},this.wrapper),this.layer.enableBehavior(b("ContextualLayerHideOnScroll")),(b("Style").isFixed(this.context)||this.autoflip)&&this.layer.enableBehavior(b("ContextualLayerAutoFlip")),this.subscribe("render",this.renderLayer.bind(this))};d.show=function(){this.minWidth?b("Style").set(this.wrapper,"min-width",this.minWidth+"px"):this.width?b("Style").set(this.wrapper,"width",this.width+"px"):b("Style").set(this.wrapper,"width",b("DOMDimensions").getElementDimensions(this.context).width+"px");var c=a.prototype.show.call(this);this.layer.show();this.inform("show");return c};d.hide=function(){this.layer.hide();this.inform("hide");return a.prototype.hide.call(this)};d.renderLayer=function(){if(!this.isVisible())return;this.layer.isShown()?this.layer.updatePosition():this.layer.show()};d.clearText=function(){this.layer.getCausalElement().value=""};d.getContext=function(){return this.element.parentNode};return c}(b("BucketedTypeaheadView"));e.exports=a}),null);
__d("TypeaheadCore",["Arbiter","ArbiterMixin","CSS","DOM","Event","Focus","Input","InputSelection","Keys","StickyPlaceholderInput","UserAgent","bind","emptyFunction","mixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this)||this;c.events=["blur","focus","click","unselect","loading","change"];c.keepFocused=!0;c.preventFocusChangeOnTab=!1;c.queryTimeout=250;c.resetOnKeyup=!0;c.resetOnSelect=!1;c.setValueOnSelect=!1;c.selectOnTabKey=!0;c.selectOnClick=!0;Object.assign(babelHelpers.assertThisInitialized(c),b);return c}var d=c.prototype;d.init=function(a,c,d){this.init=b("emptyFunction"),this.data=a,this.view=c,this.root=d,this.initInput(),this.inputWrap=b("DOM").find(d,"div.wrap"),this.hiddenInput=b("DOM").find(d,"input.hiddenInput"),this.value="",this.nextQuery=null,this.selectedText=null,this.setValueOnSelect&&b("CSS").hasClass(this.inputWrap,"selected")&&(this.selectedText=this.getValue()),this.initView(),this.initData(),this.initEvents(),this.initToggle(),this._exclusions=[]};d.initInput=function(){this.element=b("DOM").find(this.root,".textInput");var a=b("DOM").scry(this.element,"input")[0];a&&(this.element=a)};d.initView=function(){var a=this;this.view.subscribe("highlight",b("Focus").set.bind(null,this.element));this.view.subscribe("select",function(b,c){a.select(c.selected)});this.view.subscribe("afterSelect",function(){a.afterSelect()})};d.initData=function(){var a=this;this.data.subscribe("notify",function(b,c){a.root.id==c.rootid&&!a.element.disabled&&c.value==a.getValue()&&a.view.render(c.value,c.results,c.isAsync)});this.data.subscribe("respond",function(b,c){(c.forceDisplay||c.value==a.getValue()&&!a.element.disabled&&(a.element.getAttribute("singlestate")!=="true"||c.nullState))&&a.view.render(c.value,c.results,c.isAsync)});this.data.subscribe("activity",function(b,c){a.fetching=c.activity,a.fetching||a.nextQuery&&a.performQuery(),a.loading!=a.fetching&&(a.loading=a.fetching,a.inform("loading",{loading:a.loading}))})};d.initEvents=function(){b("Event").listen(this.view.getElement(),{mouseup:this.viewMouseup.bind(this),mousedown:this.viewMousedown.bind(this)});var a={blur:b("bind")(this,"blur"),focus:b("bind")(this,"focus"),click:b("bind")(this,"click"),keyup:b("bind")(this,"keyup"),keydown:b("bind")(this,"keydown"),keypress:b("bind")(this,"keypress")};b("UserAgent").isBrowser("Firefox")&&b("Event").listen(this.element,{input:a.keyup});b("Event").listen(this.element,a)};d.initToggle=function(){this.subscribe("blur",this.view.hide.bind(this.view)),this.subscribe("focus",this.view.show.bind(this.view))};d.viewMousedown=function(){this.selecting=!0};d.viewMouseup=function(){this.selecting=!1};d.blur=function(){if(this.selecting){this.selecting=!1;return}this.inform("blur")};d.click=function(){if(this.selectOnClick){var a=b("InputSelection").get(this.element);a.start==a.end&&this.element.select()}this.inform("click")};d.focus=function(){this.checkValue(),this.inform("focus")};d.keyup=function(){this.resetOnKeyup&&!this.getValue()&&this.view.reset(),this.checkValue(),this.getValue().length===0&&this.inform("change",null)};d.keydown=function(a){__p&&__p();if(!this.view.isVisible()||this.view.isEmpty()){setTimeout(this.checkValue.bind(this),0);return}switch(b("Event").getKeyCode(a)){case b("Keys").TAB:this.handleTab(a);return;case b("Keys").UP:this.view.prev();break;case b("Keys").DOWN:this.view.next();break;case b("Keys").ESC:this.view.reset();break;default:setTimeout(this.checkValue.bind(this),0);return}a.kill()};d.keypress=function(a){this.view.getSelection()&&b("Event").getKeyCode(a)==b("Keys").RETURN&&(this.view.select(),a.kill())};d.handleTab=function(a){this.preventFocusChangeOnTab&&(this.view.getSelection()?a.kill():a.prevent()),this.selectOnTabKey&&this.view.select()};d.select=function(a){if(a&&this.setValueOnSelect){var c=a.orig_text||a.text;this.setValue(c);this.setHiddenValue(a.uid);this.selectedText=c;b("CSS").addClass(this.inputWrap,"selected")}};d.afterSelect=function(){this.keepFocused?b("Focus").set(this.element):this.element.blur(),this.resetOnSelect?this.reset():this.view.reset()};d.unselect=function(){this.setValueOnSelect&&(this.selectedText=null,b("CSS").removeClass(this.inputWrap,"selected")),this.setHiddenValue(),this.inform("unselect",this)};d.setEnabled=function(a){a=a===!1;this.element.disabled=a;b("CSS").conditionClass(this.root,"uiTypeaheadDisabled",a)};d.reset=function(){this.unselect(),this.setValue(),this.keepFocused||b("Input").reset(this.element),this.view.reset(),this.inform("reset")};d.getElement=function(){return this.element};d.setExclusions=function(a){this._exclusions=a.map(String)};d.getExclusions=function(){return this._exclusions};d.setValue=function(a){this.value=this.nextQuery=a||"",b("Input").setValue(this.element,this.value),b("StickyPlaceholderInput").update(this.element),this.inform("change",a)};d.setHiddenValue=function(a){typeof a==="number"&&(a=String(a));this.hiddenInput.value=a||"";b("Arbiter").inform("Form/change",{node:this.hiddenInput});a=document.createEvent("HTMLEvents");a.initEvent("change",!1,!0);this.hiddenInput.dispatchEvent(a)};d.getValue=function(){return b("Input").getValue(this.element)};d.getHiddenValue=function(){return this.hiddenInput.value||""};d.checkValue=function(){var a=this.getValue();if(a==this.value)return;this.selectedText&&this.selectedText!=a&&this.unselect();var b=Date.now(),c=b-this.time;this.time=b;this.value=this.nextQuery=a;this.inform("change",this.value);this.performQuery(c)};d.performQuery=function(a){if(this.selectedText)return;a=a||0;this.fetching&&a<this.queryTimeout?this.data.query(this.nextQuery,!0,this._exclusions,a):(this.data.query(this.nextQuery,!1,this._exclusions,a),this.nextQuery=null)};d.updateHeight=function(){};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("SearchFiltersCustomSource",["csx","cx","CSS","DOM","DOMQuery","EventListener","Form","Keys","tidyEvent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.sourceElem=a;this.placeholder=c;this.form=d;a=b("DOMQuery").scry(this.sourceElem,'input[type="text"]');a.length>0&&(this.input=a[0]);b("tidyEvent")(b("EventListener").listen(this.placeholder,"click",function(a){e.$1()}));b("tidyEvent")(b("EventListener").listen(this.placeholder,"keyup",function(a){a.keyCode===b("Keys").RETURN&&e.$1()}));this.input!=null&&b("tidyEvent")(b("EventListener").listen(this.input,"blur",function(a){b("CSS").show(e.placeholder),e.placeholder.setAttribute("aria-hidden","false"),e.placeholder.setAttribute("aria-expanded","false"),b("CSS").hide(e.sourceElem),e.sourceElem.setAttribute("aria-hidden","true")}))}var c=a.prototype;c.$1=function(){b("CSS").addClass(this.sourceElem,"_4ivt"),b("CSS").show(this.sourceElem),this.sourceElem.setAttribute("aria-hidden","false"),b("CSS").hide(this.placeholder),this.placeholder.setAttribute("aria-hidden","true"),this.placeholder.setAttribute("aria-expanded","true"),this.$2(),this.$3()};c.$2=function(){this.input!=null&&this.input.focus()};c.$3=function(){__p&&__p();var a=b("DOMQuery").scry(this.sourceElem,"._4ivu input");if(a.length>0){b("Form").getElements(this.form).forEach(function(a){a.type==="radio"&&b("DOM").setAttributes(a,{checked:!1})});for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b("DOM").setAttributes(e,{checked:!0})}}};return a}();e.exports=a}),null);
__d("SearchLHCFiltersUtil",[],(function(a,b,c,d,e,f){"use strict";a={FILTERS:"filters",encodeFilters:function(a){return btoa(JSON.stringify(a))},decodeFilters:function(a){return JSON.parse(atob(a))}};e.exports=a}),null);
__d("SearchFiltersDateSelector",["csx","DateStrings","DateTime","DOM","DOMQuery","SearchLHCFiltersUtil","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c){this.date=b("DateTime").localCreate(c.timestamp).toFBDate(),this.monthSelector=c.monthSelect,this.requestParam=c.requestParam,this.uri=c.uri,this.useWildcard=c.useWildcard,this.yearSelector=c.yearSelect,this.filterName=c.filterName,this.init()}var c=a.prototype;c.init=function(){var a=this;this.useWildcard?this.monthSelector.setValue("none"):(this.monthSelector.setValue(String(this.date.getMonth())),this.$1());this.yearSelector.setValue(String(this.date.getYear()));this.$2();this.$3();this.monthSelector.subscribe("change",function(){a.$1(),a.refreshFilter()});this.yearSelector.subscribe("change",function(){a.$2(),a.refreshFilter()})};c.$3=function(){var a=b("DateTime").localNow(),c=this.monthSelector.getMenu();a.getYear()===this.date.getYear()?c.forEachItem(function(b){var c=Number(b.getValue());c>a.getMonth()?b.disable():b.enable()}):c.forEachItem(function(a){a.enable()})};c.$1=function(){var a=this.monthSelector.getValue();if(a==="none")return;a=Number(a);var c=b("DateStrings").getMonthNameShort(a);this.date=this.date.setMonth(a);a=b("DOMQuery").find(this.monthSelector.getButton(),"span._55pe");b("DOM").setContent(a,c)};c.$2=function(){var a=this.yearSelector.getValue();this.date=this.date.setYear(Number(a))};c.refreshFilter=function(){__p&&__p();var a=String(this.date.getYear()),c,d=this.monthSelector.getValue();if(d==="none")c={start_year:a,start_month:a+"-01",end_year:a,end_month:a+"-12"};else{d=this.date.format("m");switch(d){case"01":c={start_year:a,end_month:a+"-"+d};break;case"12":c={start_month:a+"-"+d,end_year:a};break;default:c={start_month:a+"-"+d,end_month:a+"-"+d}}}c={name:this.filterName,args:JSON.stringify(c)};a=this.uri.getQueryData();d={};b("SearchLHCFiltersUtil").FILTERS in a&&(d=b("SearchLHCFiltersUtil").decodeFilters(a.filters));d[this.requestParam]=JSON.stringify(c);this.uri.addQueryData(b("SearchLHCFiltersUtil").FILTERS,b("SearchLHCFiltersUtil").encodeFilters(d));b("goURI")(this.uri)};return a}();e.exports=a}),null);
__d("SearchFiltersFreeFormSelection",["cx","fbt","DOM","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.typeahead=a,this.subscription=null}var c=a.prototype;c.enable=function(){__p&&__p();var a=this.typeahead.getElement();a=b("DOM").find(a,"input.hiddenInput");if(!a)return;a=a.name;var c="",d="";switch(a){case"filters_employer":c="employer";d="_378l";break;case"filters_city":c="location";d="_378m";break;case"filters_school":c="school";d="_378n";break;default:return}a=this.typeahead.getView();this.subscription=a.subscribe("beforeRender",function(a,e){a=String(h._("Use any {entityType} matching \"{value}\"",[h._param("entityType",c),h._param("value",e.value)]));var f=b("joinClasses")("_378o",d);e.results.unshift({text:a,uid:e.value,iconClass:f,type:"_378p"})})};c.disable=function(){this.typeahead.getView().unsubscribe(this.subscription),this.subscription=null};return a}();e.exports=a}),null);
__d("SearchPeopleFriendsOf",["fbt","TokenizeUtil","URI"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.friendsOfUri=a,this.placementStrategy=b.placement_strategy,this.placementParams=b.placement_params,this.triggerStrategy=b.trigger_strategy,this.triggerParams=b.trigger_params}var c=a.prototype;c.injectInto=function(a,b){if(!a||a.length===0||!this.$1(a,b))return;if(a[0].type!=="user")return;b=this.createFindAllFriendsOf(a[0].text,a[0].uid);this.$2(b,a)};c.$2=function(a,b){var c=this.$3(b);if(c==="last"){var d=b.filter(function(a){return a.type==="user"}).length;c=d}b.splice(c,0,a)};c.$1=function(a,b){var c=this.$4(this.triggerStrategy);return c(a,this.triggerParams,b)};c.$3=function(a){var b=this.$4(this.placementStrategy);return b(a,this.placementParams)};c.$4=function(a){return this["$SearchPeopleFriendsOf_"+a]};c.$5=function(a,b,c){return!1};c.$6=function(a,b,c){return!0};c.$7=function(a,b,c){c=parseInt(b,10);b=0;for(var d=0;d<a.length;d++){var e=a[d];e.type==="user"&&e.index_rank==-1&&b++;if(b>c)return!1}return!0};c.$8=function(a,c,d){__p&&__p();c=parseInt(c,10);d=b("TokenizeUtil").tokenize(d);d=d.map(function(a){return a.toLowerCase()});var e=0;for(var f=0;f<a.length;f++){var g=a[f];if(g.type!=="user"||g.index_rank!=-1)continue;g=b("TokenizeUtil").tokenize(g.text);g=g.map(function(a){return a.toLowerCase()});if(g.length<d.length)continue;var h=!0;for(var i=0;i<d.length-1;i++)if(d[i]!==g[i]){h=!1;break}i=d.length-1;if(h&&g[i].startsWith(d[i])){e++;if(e>=c)return!1}}return!0};c.$9=function(a,b){return"last"};c.$10=function(a,b){return 1};c.createFindAllFriendsOf=function(a,c){a=g._("{name}'s Friends",[g._param("name",a)]);c=new(b("URI"))(this.friendsOfUri).addQueryData({q:"",init:"psm",fofid:c}).toString();return{uid:"people_search",type:"user",text:a,classNames:"seeAllUser",photo:"/images/search_typeahead/people_see_more.png",logType:"grammar",path:c}};return a}();e.exports=a}),null);
__d("SearchPeopleSeeMore",["fbt","invariant","TokenizeUtil","URI"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){var c=b.placement,d=b.strategy,e=b.min_users;b=b.query_to_show;this.seeMoreUri=a;this.placement=c;this.strategy=d;this.min_users=e;this.query_to_show=b}var c=a.prototype;c.injectInto=function(a,b){if(!a||a.length===0)return;b=this.$1(a,b);if(!b)return;b=this.createFindAllPeopleResult(b);this.$2(b,a)};c.$1=function(a,b){__p&&__p();var c=this;if(this.strategy==="disabled")return null;if(a[0].type!=="user")return null;a=a.filter(function(a){return a.type==="user"});if(a.length<this.min_users)return null;else a.length>this.min_users&&(a=a.slice(0,this.min_users));var d,e=a[0];switch(this.strategy){case"all_identical":var f=a.every(function(a){return c.$3(e.text,a.text)});d=f?e.text:null;break;case"top_results_prefix":d=a.reduce(function(a,b){return c.$4(a,b.text)},e.text);break;default:h(0,3956)}return!d?null:this.query_to_show==="common"?d:b};c.$2=function(a,b){if(this.placement==="last"){var c=b.filter(function(a){return a.type==="user"}).length;b.splice(c,0,a)}else{c=parseInt(this.placement,10);b.splice(c,0,a)}};c.createFindAllPeopleResult=function(a){var c=g._("Find all people named \"{query}\"",[g._param("query",a.toLowerCase())]);a=new(b("URI"))(this.seeMoreUri).addQueryData({q:a,init:"psm"}).toString();return{uid:"people_search",type:"user",text:c,classNames:"seeAllUser",photo:"/images/search_typeahead/people_see_more.png",path:a}};c.$3=function(a,c){if(a===c)return!0;a=b("TokenizeUtil").tokenize(a);var d=b("TokenizeUtil").tokenize(c);return a.length!==d.length?!1:a.every(function(a,b){return a===d[b]})};c.$4=function(a,c){__p&&__p();if(!a||!c)return;if(a===c)return a;a=b("TokenizeUtil").tokenize(a);c=b("TokenizeUtil").tokenize(c);var d=[];for(var e=0;e<a.length&&e<c.length;e++)if(a[e]===c[e])d.push(a[e]);else break;return d.length===0?null:d.join(" ")};return a}();e.exports=a}),null);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Keys","Parent","ScriptPath","TypeaheadCore"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.init=function(c,d,e){__p&&__p();a.prototype.init.call(this,c,d,e);c=b("Parent").byTag(e,"form");var f=this.reset.bind(this);b("Arbiter").subscribe("pre_page_transition",function(a,b){a=/^\/search/;var c=a.test(b.from.path);a=a.test(b.to.path);c&&!a&&setTimeout(f,0)});if(c){var g=b("DOM").find(c,"input.search_sid_input");b("Event").listen(c,"submit",function(){this.data&&this.data.queryData&&(g.value=this.data.queryData.sid),setTimeout(f,0)}.bind(this),b("Event").Priority.URGENT)}};d.select=function(){this.reset(),this.element.focus(),setTimeout(function(){this.element.blur()}.bind(this),0),b("ScriptPath").setClickPointInfo({click:"Search"})};d.handleTab=function(c){var d=this.view.getQuerySuggestion(this.value);d?(b("Input").setValue(this.element,d),this.checkValue(),c.kill()):a.prototype.handleTab.call(this,c)};d.getSearchType=function(){return"regular"};d.focus=function(){a.prototype.focus.call(this),(this.getValue().length===0||this.element.getAttribute("singlestate")==="true")&&this.data.fetchNullState(this.getValue())};d.keyup=function(a){if(this.getValue().length===0&&b("Event").getKeyCode(a)===b("Keys").ESC)return;this.getValue().length===0&&this.data.fetchNullState(this.getValue());this.element.setAttribute("singlestate",!1)};return c}(b("TypeaheadCore"));e.exports=a}),null);
__d("SearchTypeaheadView",["csx","cx","fbt","Arbiter","ContextualLayerUpdateOnScroll","ContextualTypeaheadView","DOM","FbtResultBase","SearchPeopleFriendsOf","SearchPeopleFriendsOfOptions","SearchPeopleSeeMore","SearchPeopleSeeMoreOptions","URI","goURI","isEmail"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c,d)||this;c._peopleSeeMore=new(b("SearchPeopleSeeMore"))(c.getSeeMoreEndpoint("",!0),b("SearchPeopleSeeMoreOptions"));c._peopleFriendsOf=new(b("SearchPeopleFriendsOf"))(c.getSeeMoreEndpoint("",!0),b("SearchPeopleFriendsOfOptions"));return c}var d=c.prototype;d.initializeLayer=function(){a.prototype.initializeLayer.call(this),this.layer.setOffsetY(-1),this.layer.enableBehavior(b("ContextualLayerUpdateOnScroll"))};d.ignoreClick=function(a){a.prevent()};d.render=function(b,c,d){if(!c)return;this._bucketize&&(c=j(c));this.showPeopleSeeMore&&b&&this._peopleSeeMore.injectInto(c,b);this.showPeopleFriendsOf&&b&&this._peopleFriendsOf.injectInto(c,b);c={results:c,value:b};this.inform("finalResultsReordering",c);return a.prototype.render.call(this,b,c.results,d)};d.disableBucketization=function(){this._bucketize=!1};d.buildBuckets=function(c,d){var e=d.length,f=0,g;for(g=0;g<e;++g)d[g].type=="user"&&f++;this._redirectToUsersResultsPage=this.showFilterResults&&f===e;this.setWebSuggLoggingParams(c,d);!c&&this.showFindPeople&&d.unshift(this.buildFindPeople());this._bucketize&&(d=a.prototype.buildBuckets.call(this,c,d));c&&this._shouldShowSeeMore&&(d.push(this.buildSeeMore(c,e)),b("isEmail")(c)&&f<1&&d.push(this.buildInvite(c)));return d};d.buildFindPeople=function(){var a=i._("Find people");return{classNames:"seeAllUser seeAllUserNullState",logType:"grammar",path:this.getSeeMoreEndpoint(null,!0),photo:"/images/search_typeahead/people_see_more.png",text:a,type:"no_header"}};d.buildSeeMore=function(a,c){c=this.getSeeMoreText(a,c);var d="seeMoreV2",e="calltoactionV2",f=b("DOM").create("span",{className:"simpleSearchSeeMoreRowRedesignIcon"});e=b("DOM").create("li",{className:e},[f,b("DOM").create("a",{href:this.getSeeMoreEndpoint(a),rel:"ignore"},[b("DOM").create("span",{className:"text"},[b("DOM").create("span",{className:d},c)])])]);c instanceof b("FbtResultBase")?e.setAttribute("aria-label",c.flattenToArray()):e.setAttribute("aria-label",c);return{uid:"search",node:e,search:!0}};d.getSeeMoreText=function(a,c){if(this.showKeywordResultsPage)return i._("Search for {query}",[i._param("query",a)]);if(c<=0)return i._("See results for {query}",[i._param("query",a)]);if(this._redirectToUsersResultsPage)return i._("Filter results for {query}",[i._param("query",a)]);c=b("DOM").create("b",{},a);return i._("Find more results for {query}",[i._param("query",c)])};d.getSeeMoreSubtext=function(a){if(a===0)return i._("No results to display");return a===1?i._("Displaying top result"):i._({"*":"Displaying top {number} results"},[i._param("number",a,[0])])};d.buildInvite=function(a){var c=i._("Invite {query} to Facebook",[i._param("query",a)]);a=b("DOM").create("li",{className:"calltoaction"},[b("DOM").create("a",{href:this.getInviteEndpoint(a),rel:"ignore"},[b("DOM").create("span",{className:"text"},[b("DOM").create("span",{className:"invite"},[c])])])]);c instanceof b("FbtResultBase")?a.setAttribute("arial-label",c.flattenToArray()):a.setAttribute("aria-label",c);return{uid:"invite",node:a,search:!0}};d.searchPageQueryData=function(a){return babelHelpers["extends"]({q:a},this.queryData||{})};d.searchPageTypeData=function(a){return this._redirectToUsersResultsPage||a?{type:"users"}:{}};d.select=function(c){var d=this.index,e=this.results[d];if(!e||e.type=="header")return;e=this.items[d];d=b("DOM").scry(e,"a")[0];a.prototype.select.call(this,c);d&&d.href&&(d.target=="_blank"?window.open(d.href):b("goURI")(d.href))};d.setSid=function(a){this.queryData.tas=a};d.getSeeMoreEndpoint=function(a,c){return new(b("URI"))(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(a)).addQueryData(this.searchPageTypeData(c)).toString()};d.getInviteEndpoint=function(a){return new(b("URI"))("/invite.php").addQueryData({email_list:a})};d.show=function(){this.isVisible()||(b("Arbiter").inform("layer_shown",{type:"SearchTypeahead"}),this.searchBtns=this.searchBtns||b("DOM").scry(this.typeahead,"button.reDesignedBtn"),this.searchBtns[0]&&CSS.addClass(this.searchBtns[0],"btnSelected"),a.prototype.show.call(this))};d.hide=function(){this.isVisible()&&(b("Arbiter").inform("layer_hidden",{type:"SearchTypeahead"}),this.searchBtns=this.searchBtns||b("DOM").scry(this.typeahead,"button.reDesignedBtn"),this.searchBtns[0]&&CSS.matchesSelector(this.searchBtns[0],".btnSelected")&&CSS.removeClass(this.searchBtns[0],"btnSelected"),a.prototype.hide.call(this))};d.getQuerySuggestion=function(a){var b=this.results[this.index];b=b&&b.type!="header"?b.text.toLowerCase():"";return b==a.toLowerCase()?"":b};d.setWebSuggLoggingParams=function(a,b){__p&&__p();var c=0,d=0;for(var e=0;e<b.length;e++)if(b[e].type==="websuggestion"){d===0&&(d=e+1);var f="FR"+(e-c)+"AS"+c,g=e+1;b[e].path+="&wssk="+f+"&wssp="+g+"&wspq="+encodeURIComponent(a);b[e].path+="&wssrc="+b[e].websuggestion_source;c++}f="&wssc="+b.length+"-"+a.length+"&wsbp="+c+"-"+d;for(e=0;e<b.length;e++)b[e].type==="websuggestion"&&(b[e].path+=f)};return c}(b("ContextualTypeaheadView"));function j(a){var b,c,d,e,f=[],g={};c=a.length;for(b=0;b<c;b++)d=a[b],e=d.render_type||d.type,Object.prototype.hasOwnProperty.call(g,e)||(g[e]=f.length,f.push([])),f[g[e]].push(d);a=[];c=f.length;for(b=0;b<c;++b)d=f[b][0],e=d.render_type||d.type,a=a.concat(f[b]);return a}Object.assign(a.prototype,{_shouldShowSeeMore:!0,_bucketize:!0,queryData:{init:"quick"}});e.exports=a}),null);
__d("TypeaheadSearchFilter",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._typeahead=a}var c=a.prototype;c.enable=function(){var a=this._typeahead,c=a.getView().seeMoreEndpoint;this._subscriptions=[b("Arbiter").subscribe("search/typeahead/updateFilter",function(b,c){c.filter_type=="web"&&(a.getView().queryData.form="FBKBFR"),a.getView().queryData.type=c.filter_type}),b("Arbiter").subscribe("search/typeahead/updateSeeMoreEndpoint",function(b,c){a.getView().seeMoreEndpoint=c}),b("Arbiter").subscribe("page_transition",function(b,d){a.getView().queryData.form&&delete a.getView().queryData.form,delete a.getView().queryData.type,a.getView().seeMoreEndpoint=c},"new")]};c.disable=function(){this._subscriptions.forEach(function(a){a.unsubscribe()}),this._subscriptions=null};return a}();Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.initFilters=function(a){a.enableBehavior(b("TypeaheadSearchFilter"))}}),3);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";function a(a){this._typeahead=a}var c=a.prototype;c.enable=function(){new(b("SearchTypeaheadRecorder"))(this._typeahead)};return a}();Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.searchRecorderBasic=function(a){a.enableBehavior(b("TypeaheadSearchRecorderBasic"))}}),3);
__d("SessionStartSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.core=a.getCore(),this.data=a.getData(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.enable=function(){var a=this;this.subscriptionsHandler.addSubscriptions(this.data.subscribe("query",function(){a.openSurvey()}))};c.disable=function(){this.subscriptionsHandler.release(),this.request&&this.request.abort()};c.openSurvey=function(){if(this.openedSurvey)return;this.openedSurvey=!0;var a=b("XSearchFacebarSurveyController").getURIBuilder().setString("id",b("getOrCreateDOMID")(this.core.element)).setExists("on_session_start",!0).setString("session_id",this.data.queryData.sid);this.request=new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI());this.request.send()};return a}();e.exports=a}),null);
__d("TypeaheadDetectQueryLocale",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._typeahead=a,this._data=a.getData(),this._queryCache={"":this._data.queryCache,ja_JP:{},zh_TW:{}}}var b=a.prototype;b.enable=function(){__p&&__p();this._previousLocale="",this._reset=this._typeahead.subscribe("reset",this._swapQueryCache.bind(this,"")),this._beforeQuery=this._data.subscribe("beforeQuery",function(a,b){a=b.value;if(a===""){this._swapQueryCache("");return}b=null;a=a.charCodeAt(a.length-1);12352<=a&&a<=12543?b="ja_JP":12544<=a&&a<=12735&&(b="zh_TW");this._swapQueryCache(b)}.bind(this))};b.disable=function(){this._swapQueryCache(""),this._data.unsubscribe(this._beforeQuery),this._typeahead.ubsubscribe(this._reset)};b._swapQueryCache=function(a){if(a===null||a===this._previousLocale)return;this._data.queryCache=this._queryCache[a];this._data.setQueryData({query_locale:a});this._previousLocale=a};return a}();e.exports=a}),null);
__d("TypeaheadExcludeBootstrapFromQueryCache",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._data=a.getData()}var b=a.prototype;b.enable=function(){this._buildingQueryCache=!1,this._buildQueryCache=this._data.subscribe("buildQueryCache",function(){this._buildingQueryCache=!0}.bind(this)),this._mergeUids=this._data.subscribe("mergeUids",function(a,b){this._buildingQueryCache&&b.local_uids.splice(0,b.local_uids.length)}.bind(this)),this._fetchComplete=this._data.subscribe("fetchComplete",function(){this._buildingQueryCache=!1}.bind(this))};b.disable=function(){this._data.unsubscribe(this._buildQueryCache),this._data.unsubscribe(this._mergeUids),this._data.unsubscribe(this._fetchComplete)};return a}();e.exports=a}),null);
__d("TypeaheadRecentSearchUpdater",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.view=a.getView()}var c=a.prototype;c.enable=function(){this.updaterSubscription=this.view.subscribe("select",function(){b("Arbiter").inform("search/refreshRecentSearchesNullstate",{},"state")})};c.disable=function(){this.view.unsubscribe(this.updaterSubscription)};return a}();e.exports=a}),null);
__d("Selector",["csx","ArbiterMixin","BehaviorsMixin","Button","DOM","DOMQuery","mixin"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f){var g;g=a.call(this)||this;g._popoverMenu=b;g._button=c;g._menu=d;g._input=e;g.init();f.behaviors&&g.enableBehaviors(f.behaviors);return g}var d=c.prototype;d.init=function(){this._menu.subscribe("change",function(a,b){this._setLabelContent(b.label),this._input.value=b.value,this.inform("change",b)}.bind(this)),this._popoverMenu.getPopover().subscribe(["hide","show"],function(a){this.inform(a)}.bind(this))};d._getLabel=function(){return b("DOMQuery").find(this._button,"span._55pe")};d._setLabelContent=function(a){var c=this._getLabel();b("DOM").setContent(c,a)};d.getLabelContent=function(){var a=this._getLabel();return a.firstChild};d.setValue=function(a){this._menu.setValue(a)};d.getValue=function(){return this._input.value};d.getName=function(){return this._input.name};d.getButton=function(){return this._button};d.getMenu=function(){return this._menu};d.enable=function(){b("Button").setEnabled(this._button,!0),this._popoverMenu.enable()};d.disable=function(){b("Button").setEnabled(this._button,!1),this._popoverMenu.disable()};return c}(b("mixin")(b("ArbiterMixin"),b("BehaviorsMixin")));e.exports=a}),null);
__d("BrowseInstantFilterTypeahead",["SearchLHCFiltersUtil","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){a.typeahead.subscribe("select",function(c,d){c=new(b("URI"))(a.current_uri);var e=c.getQueryData(),f={};b("SearchLHCFiltersUtil").FILTERS in e&&(f=b("SearchLHCFiltersUtil").decodeFilters(e.filters));f[a.request_param]=JSON.stringify({name:a.filter_name,args:d.selected.uid});c.addQueryData(b("SearchLHCFiltersUtil").FILTERS,b("SearchLHCFiltersUtil").encodeFilters(f));c.go()})};e.exports=a}),null);
__d("TypeaheadShowLoadingIndicator",["CSS"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._typeahead=a}var c=a.prototype;c.enable=function(){this._subscription=this._typeahead.subscribe("loading",function(a,c){b("CSS").conditionClass(this._typeahead.getElement(),"typeaheadLoading",c.loading),b("CSS").conditionClass(this._typeahead.getView().getElement(),"typeaheadViewLoading",c.loading)}.bind(this))};c.disable=function(){this._typeahead.unsubscribe(this._subscription),this._subscription=null};return a}();Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("legacy:ShowLoadingIndicatorTypeaheadBehavior",["TypeaheadShowLoadingIndicator"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.showLoadingIndicator=function(a){a.enableBehavior(b("TypeaheadShowLoadingIndicator"))}}),3);
__d("TypeaheadPreventSubmitOnEnter",["Event","Keys"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._typeahead=a}var c=a.prototype;c.enable=function(){var a=this._typeahead.getCore().getElement();this._listener=b("Event").listen(a,"keypress",function(a){b("Event").getKeyCode(a)==b("Keys").RETURN&&a.kill()})};c.disable=function(){this._listener.remove(),this._listener=null};return a}();Object.assign(a.prototype,{_listener:null});e.exports=a}),null);
__d("SearchTypeaheadRenderer",["fbt","BadgeHelper","DOM","Locale","TokenizeUtil","TypeaheadFacepile","UnicodeBidi","URI","WWWBase"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1;function i(a,c){__p&&__p();c=[];var d=a.photos||a.photo;d&&(d instanceof Array?d=b("TypeaheadFacepile").render(d):d=b("DOM").create("img",{alt:"",src:d}),c.push(d));if(a.text){d=a.alias;var e=this.value,f=a.text,j=b("UnicodeBidi").isDirectionRTL(f.toString()),k=b("Locale").isRTL();j=j&&!k?"rtl":!j&&k?"ltr":"";k=[f];d&&b("TokenizeUtil").isQueryMatch(e,d)&&!b("TokenizeUtil").isQueryMatch(e,f)&&k.push(b("DOM").create("span",{className:"alias"},[" \xb7 "+d]));a.is_verified&&k.push(b("BadgeHelper").renderBadge("xsmall","verified"));if(a.badge){k.push(b("DOM").create("span",{className:""}," \xb7 "));e=[a.badge];k.push(b("DOM").create("span",{className:"unSeenPosts"},e))}c.push(b("DOM").create("span",{className:"text",dir:j},k))}if(a.category){f=[a.category];a.is_external&&f.push(b("DOM").create("span",{className:"arrow"}));d=a.message?"preCategory":"category";c.push(b("DOM").create("span",{className:d},f))}a.message&&c.push(b("DOM").create("span",{className:"category"},[a.message]));e=a.subtextOverride||a.subtext;if(e){j=[e];c.push(b("DOM").create("span",{className:"subtext"},j))}k=a.classNames||a.type||"";d=a.is_external?"_blank":"";f=!a.song&&a.path||"";f&&(/^https?\:\/\//.test(f)||(f=b("WWWBase").uri+f.substr(1)),f+=(f.indexOf("?")>0?"&":"?")+"ref=ts&fref=ts");e=b("DOM").create("a",{href:f,rel:"ignore",target:d},c);j=null;if(a.type==="header"){f=null;d=null;a.uid==="recent"?(d=new(b("URI"))("/profile.php"),d.setQueryData({sk:"allactivity",log_filter:"search"}),f=g._("EDIT")):a.uid==="pymk"&&(d=new(b("URI"))("/find-friends/browser/"),f=g._("SEE ALL"));d&&(j=b("DOM").create("a",{href:d,className:"typeaheadHeaderRightLink"},f),e.setAttribute("class","typeaheadHeaderLeftLink"),k+=" typeaheadHeader")}c=b("DOM").create("li",{className:k},[e,j]);a.text&&(c.setAttribute("title",a.text),c.setAttribute("aria-label",a.text));this.showupadatedsuggestions&&!h&&(i.className+=" updatedSuggestionRows",h=!0);return c}i.className="search";e.exports=i}),null);
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],(function(a,b,c,d,e,f){a.TypeaheadRenderers||(a.TypeaheadRenderers={}),a.TypeaheadRenderers.search=b("SearchTypeaheadRenderer")}),3);
__d("ContextualLayerAsyncRelative",["Event","Parent"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a}var c=a.prototype;c.enable=function(){this._layerSubscription=this._layer.subscribe("show",this._attachListener.bind(this)),this._layer.isShown()&&this._attachListener()};c.disable=function(){this._layerSubscription.unsubscribe(),this._layerSubscription=null,this._listener&&(this._listener.remove(),this._listener=null)};c._attachListener=function(){this._listener=b("Event").listen(this._layer.getRoot(),"click",this._onclick.bind(this))};c._onclick=function(a){__p&&__p();var c=b("Parent").byTag(a.getTarget(),"A");if(!c)return;a=c.getAttribute("ajaxify");var e=c.href,f=a||e;if(c.rel==="async"||c.rel==="async-post"){d(["AsyncRequest"],function(a){a.bootstrap(f,this._layer.getContext(),c.rel==="async-post")}.bind(this));return!1}};return a}();Object.assign(a.prototype,{_layerSubscription:null,_listener:null});e.exports=a}),null);