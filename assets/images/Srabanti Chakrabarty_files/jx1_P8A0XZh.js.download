if (self.CavalryLogger) { CavalryLogger.start_js(["g+U5d"]); }

__d("UFIAddCommentController",["Parent","PrivateCommentsConfig","React","ReactDOM","UFIAddComment.react","UFIAddCommentActionType","UFIAsyncWrapper","UFICallbackStore","UFICommentEditIDStore","UFIDispatcher","UFIDispatcherContext.react","UFIFeedbackContext.react","UFINewCommentNotifier"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.factory=function(b,c){c.rootid=b.id;return new a(b,Object.freeze(c))};function a(a,c){__p&&__p();var d=this;this.renderAddComment=function(a,c){return d.$5!==null||!c||!c.cancomment||!c.actorforpost?null:b("React").createElement(b("UFIAddComment.react"),{viewerActorID:c.actorforpost,targetID:c.ownerid,targetName:c.actorname,groupID:c.grouporeventid,initialData:null,ref:null,withoutSeparator:!1,editingComment:{},isEditing:!1,allowLiveVideoCommentReplyMode:!0,mentionsDataSource:c.mentionsdatasource,showSendOnEnterTip:c.showsendonentertip,peopleOutsideCommunityInCommentNotice:c.peopleoutsidecommunityincommentnotice,allowPhotoAttachments:c.allowphotoattachments&&!a.islivestreaming&&!a.isActiveLivingRoom,allowVideoAttachments:c.allowvideoattachments&&!a.islivestreaming&&!a.isActiveLivingRoom,allowFileAttachments:c.allowfileattachments&&!a.islivestreaming&&!a.isActiveLivingRoom,allowStickerAttachments:c.allowstickerattachments&&(!a.islivestreaming||c.allowLiveVideoStickerAttachments),allowCustomStickerAttachments:c.allowgaminglivestreamcustomstickers,allowCustomStickerAttachmentsV2:c.allowgaminglivestreamcustomstickersv2,allowGifAttachments:c.allowgifattachments&&(!a.islivestreaming||c.allowgaminglivestreamgifattachments)&&!a.isActiveLivingRoom,allowBotMentions:c.allowbotmentions&&!a.islivestreaming&&!a.isActiveLivingRoom,allowNativeTipJar:c.isnativetipjarenabled,tipJarModule:c.tipjarmodule,allowFlexibleTipping:c.isflexibletippingenabled,flexibleStarsModule:c.flexiblestarsmodule,allowShortcutTipping:c.isshortcuttippingenabled,allowTogglePrivateComments:(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&c.canviewercommentinprivate,privateCommentTarget:c.actorname,contextArgs:a,feedback:c,subtitle:c.subtitle,commentsTargetID:c.commentstargetfbid,allowCommentMarkdown:a.allowcommentmarkdown})};this.$1=a;this.$2=c;this.$3=new(b("UFIDispatcher"))();this.$4={UFICallbackStore:new(b("UFICallbackStore"))(this.$3)};this.$4.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_NEW,function(c){return b("UFINewCommentNotifier").onNewComment(b("Parent").byTag(a,"form"),d.$2,c.comment,c.target,c.replyCommentID,c.timestamp)});this.$5=b("UFICommentEditIDStore").getForInstance(this.$2.instanceid);b("UFICommentEditIDStore").addListener(function(){var a=b("UFICommentEditIDStore").getForInstance(d.$2.instanceid);a!=d.$5&&(d.$5=a,d.render())});this.render()}var c=a.prototype;c.render=function(){var a=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$4},b("React").createElement(b("UFIFeedbackContext.react"),{contextArgs:this.$2,render:this.renderAddComment}));b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,a),this.$1)};c.disable=function(){this.$4.UFICallbackStore.remove()};return a}();e.exports=a}),null);
__d("FreeformTokenizerBehavior",["Event","Input","Keys"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){__p&&__p();var d=c.matcher&&new RegExp(c.matcher,"i"),e=c.splitter&&new RegExp(c.splitter),f=c.tokenize_on_blur!==!1,g=c.tokenize_on_paste!==!1,h=c.split_on_check===!0,i=c.select_on_comma!==!1,j=c.select_on_space===!0,k=c.never_submit===!0;function l(c){__p&&__p();var f=b("Input").getValue(a.getInput()).trim();e&&c&&c.type=="paste"?f=f.split(e):e&&h?f=f.split(e):f=[f];var g=!1;for(var i=0;i<f.length;i++){var j=f[i].trim();if(j&&(!d||d.test(j))){j={uid:j,text:j,freeform:!0};a.addToken(a.createToken(j));g=!0}}c&&g&&(a.getTypeahead().getCore().afterSelect(),c.kill())}a.subscribe("keydown",function(c,d){c=d.event;d=b("Event").getKeyCode(c);if(d==b("Keys").RETURN||i&&d==b("Keys").COMMA||j&&d==b("Keys").SPACE){var e=a.getTypeahead().getView();e.getSelection()?(e.select(),c.kill()):l(c)}d==b("Keys").RETURN&&k&&c.kill()});a.subscribe("paste",function(a,b){g&&setTimeout(l.bind(null,b.event),20)});a.subscribe("blur",function(b,c){f&&l(),a.getTypeahead().getCore().reset()})}e.exports=a}),null);
__d("TypeaheadHintText",["emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";function a(a){this._typeahead=a}var b=a.prototype;b.enable=function(){this._typeahead.getCore().resetOnKeyup=!1};return a}();Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("legacy:HintTextTypeaheadBehavior",["TypeaheadHintText"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.hintText=function(a){a.enableBehavior(b("TypeaheadHintText"))}}),3);
__d("VideoChainingToken",["Base64"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";function a(a){this.$1=a}a.encode=function(c){return new a(b("Base64").encode(JSON.stringify(c)))};var c=a.prototype;c.decode=function(){return JSON.parse(b("Base64").decode(this.$1))};return a}();e.exports=a}),null);
__d("TahoeCommentComposer",["Arbiter","DOM","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";a={init:function(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Arbiter").subscribe("TahoeView/selectCommentTab",function(){var c=b("DOM").scry(a.commentComposer,".UFIInputContainer input")[0];c&&c.focus()}));b("Run").onLeave(function(){c.release()})}};e.exports=a}),null);